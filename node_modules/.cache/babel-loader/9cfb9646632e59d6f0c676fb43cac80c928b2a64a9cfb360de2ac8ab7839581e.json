{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrewsquier/sei/project/pasta-bar/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrewsquier/sei/project/pasta-bar/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{getToken}from\"./users-service\";var BASE_URL=\"/api/users\";export default function sendRequest(_x){return _sendRequest.apply(this,arguments);}function _sendRequest(){_sendRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,payload,options,token,res,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:\"GET\";payload=_args.length>2&&_args[2]!==undefined?_args[2]:null;options={method:method};if(payload){options.headers={\"Content-Type\":\"application/json\"};options.body=JSON.stringify(payload);}token=getToken();//if there's a token, include it in req\nif(token){options.headers=options.headers||{};options.headers.Authorization=\"Bearer \".concat(token);}_context.next=8;return fetch(url,options);case 8:res=_context.sent;if(!res.ok){_context.next=13;break;}return _context.abrupt(\"return\",res.json());case 13:throw new Error(\"Bad Request\");case 14:case\"end\":return _context.stop();}},_callee);}));return _sendRequest.apply(this,arguments);}export function signUp(_x2){return _signUp.apply(this,arguments);}function _signUp(){_signUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userData){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",sendRequest(BASE_URL,\"POST\",userData));case 1:case\"end\":return _context2.stop();}},_callee2);}));return _signUp.apply(this,arguments);}export function login(_x3){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(credentials){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",sendRequest(BASE_URL+\"/login\",\"POST\",credentials));case 1:case\"end\":return _context3.stop();}},_callee3);}));return _login.apply(this,arguments);}export function checkToken(){return _checkToken.apply(this,arguments);}function _checkToken(){_checkToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",sendRequest(BASE_URL+\"/check-token\"));case 1:case\"end\":return _context4.stop();}},_callee4);}));return _checkToken.apply(this,arguments);}","map":{"version":3,"names":["getToken","BASE_URL","sendRequest","url","method","payload","options","headers","body","JSON","stringify","token","Authorization","fetch","res","ok","json","Error","signUp","userData","login","credentials","checkToken"],"sources":["/Users/andrewsquier/sei/project/pasta-bar/src/utilities/users-api.js"],"sourcesContent":["import { getToken } from \"./users-service\"\n\nconst BASE_URL = \"/api/users\"\n\nexport default async function sendRequest(url, method=\"GET\", payload=null) {\n    const options = { method }\n    if (payload) {\n        options.headers = { \"Content-Type\": \"application/json\" }\n        options.body = JSON.stringify(payload)\n    }  \n\n    const token = getToken()\n    //if there's a token, include it in req\n    if(token) {\n        options.headers = options.headers || {}\n        options.headers.Authorization = `Bearer ${token}`\n    }\n\n    const res = await fetch(url, options) \n    if(res.ok) {\n        return res.json()\n    } else {\n        throw new Error(\"Bad Request\")\n    }\n}\n\n\nexport async function signUp(userData) {\n    return sendRequest(BASE_URL, \"POST\", userData)\n}\n\nexport async function login(credentials) {\n    return sendRequest(BASE_URL + \"/login\", \"POST\", credentials)\n}\n\nexport async function checkToken() {\n    return sendRequest(BASE_URL + \"/check-token\")\n}\n"],"mappings":"8QAAA,OAASA,QAAQ,KAAQ,iBAAiB,CAE1C,GAAMC,SAAQ,CAAG,YAAY,CAE7B,uBAA8BC,YAAW,gDAoBxC,+FApBc,iBAA2BC,GAAG,wKAAEC,MAAM,+CAAC,KAAK,CAAEC,OAAO,+CAAC,IAAI,CAC/DC,OAAO,CAAG,CAAEF,MAAM,CAANA,MAAO,CAAC,CAC1B,GAAIC,OAAO,CAAE,CACTC,OAAO,CAACC,OAAO,CAAG,CAAE,cAAc,CAAE,kBAAmB,CAAC,CACxDD,OAAO,CAACE,IAAI,CAAGC,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC,CAC1C,CAEMM,KAAK,CAAGX,QAAQ,EAAE,CACxB;AACA,GAAGW,KAAK,CAAE,CACNL,OAAO,CAACC,OAAO,CAAGD,OAAO,CAACC,OAAO,EAAI,CAAC,CAAC,CACvCD,OAAO,CAACC,OAAO,CAACK,aAAa,kBAAaD,KAAK,CAAE,CACrD,CAAC,sBAEiBE,MAAK,CAACV,GAAG,CAAEG,OAAO,CAAC,QAA/BQ,GAAG,mBACNA,GAAG,CAACC,EAAE,0DACED,GAAG,CAACE,IAAI,EAAE,eAEX,IAAIC,MAAK,CAAC,aAAa,CAAC,uDAErC,8CAGD,eAAsBC,OAAM,4CAE3B,qFAFM,kBAAsBC,QAAQ,wJAC1BjB,WAAW,CAACD,QAAQ,CAAE,MAAM,CAAEkB,QAAQ,CAAC,yDACjD,yCAED,eAAsBC,MAAK,2CAE1B,mFAFM,kBAAqBC,WAAW,wJAC5BnB,WAAW,CAACD,QAAQ,CAAG,QAAQ,CAAE,MAAM,CAAEoB,WAAW,CAAC,yDAC/D,wCAED,eAAsBC,WAAU,6CAE/B,6FAFM,0KACIpB,WAAW,CAACD,QAAQ,CAAG,cAAc,CAAC,yDAChD"},"metadata":{},"sourceType":"module","externalDependencies":[]}