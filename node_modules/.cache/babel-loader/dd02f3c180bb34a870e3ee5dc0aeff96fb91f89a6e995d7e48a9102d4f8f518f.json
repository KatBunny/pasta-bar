{"ast":null,"code":"import { getToken } from \"./users-service\";\nconst BASE_URL = \"/api/users\";\nexport default async function sendRequest(url) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"GET\";\n  let payload = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const options = {\n    method\n  };\n  if (payload) {\n    options.headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    options.body = JSON.stringify(payload);\n  }\n  const token = getToken();\n  //if there's a token, include it in req\n  if (token) {\n    options.headers = options.headers || {};\n    options.headers.Authorization = `Bearer ${token}`;\n  }\n  const res = await fetch(url, options);\n  if (res.ok) {\n    return res.json();\n  } else {\n    throw new Error(\"Bad Request\");\n  }\n}\nexport async function signUp(userData) {\n  return sendRequest(BASE_URL, \"POST\", userData);\n}\nexport async function login(credentials) {\n  return sendRequest(BASE_URL + \"/login\", \"POST\", credentials);\n}\nexport async function checkToken() {\n  return sendRequest(BASE_URL + \"/check-token\");\n}","map":{"version":3,"names":["getToken","BASE_URL","sendRequest","url","method","payload","options","headers","body","JSON","stringify","token","Authorization","res","fetch","ok","json","Error","signUp","userData","login","credentials","checkToken"],"sources":["/Users/andrewsquier/sei/project/pasta-bar/src/utilities/users-api.js"],"sourcesContent":["import { getToken } from \"./users-service\"\n\nconst BASE_URL = \"/api/users\"\n\nexport default async function sendRequest(url, method=\"GET\", payload=null) {\n    const options = { method }\n    if (payload) {\n        options.headers = { \"Content-Type\": \"application/json\" }\n        options.body = JSON.stringify(payload)\n    }  \n\n    const token = getToken()\n    //if there's a token, include it in req\n    if(token) {\n        options.headers = options.headers || {}\n        options.headers.Authorization = `Bearer ${token}`\n    }\n\n    const res = await fetch(url, options) \n    if(res.ok) {\n        return res.json()\n    } else {\n        throw new Error(\"Bad Request\")\n    }\n}\n\n\nexport async function signUp(userData) {\n    return sendRequest(BASE_URL, \"POST\", userData)\n}\n\nexport async function login(credentials) {\n    return sendRequest(BASE_URL + \"/login\", \"POST\", credentials)\n}\n\nexport async function checkToken() {\n    return sendRequest(BASE_URL + \"/check-token\")\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,iBAAiB;AAE1C,MAAMC,QAAQ,GAAG,YAAY;AAE7B,eAAe,eAAeC,WAAW,CAACC,GAAG,EAA8B;EAAA,IAA5BC,MAAM,uEAAC,KAAK;EAAA,IAAEC,OAAO,uEAAC,IAAI;EACrE,MAAMC,OAAO,GAAG;IAAEF;EAAO,CAAC;EAC1B,IAAIC,OAAO,EAAE;IACTC,OAAO,CAACC,OAAO,GAAG;MAAE,cAAc,EAAE;IAAmB,CAAC;IACxDD,OAAO,CAACE,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC;EAC1C;EAEA,MAAMM,KAAK,GAAGX,QAAQ,EAAE;EACxB;EACA,IAAGW,KAAK,EAAE;IACNL,OAAO,CAACC,OAAO,GAAGD,OAAO,CAACC,OAAO,IAAI,CAAC,CAAC;IACvCD,OAAO,CAACC,OAAO,CAACK,aAAa,GAAI,UAASD,KAAM,EAAC;EACrD;EAEA,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACX,GAAG,EAAEG,OAAO,CAAC;EACrC,IAAGO,GAAG,CAACE,EAAE,EAAE;IACP,OAAOF,GAAG,CAACG,IAAI,EAAE;EACrB,CAAC,MAAM;IACH,MAAM,IAAIC,KAAK,CAAC,aAAa,CAAC;EAClC;AACJ;AAGA,OAAO,eAAeC,MAAM,CAACC,QAAQ,EAAE;EACnC,OAAOjB,WAAW,CAACD,QAAQ,EAAE,MAAM,EAAEkB,QAAQ,CAAC;AAClD;AAEA,OAAO,eAAeC,KAAK,CAACC,WAAW,EAAE;EACrC,OAAOnB,WAAW,CAACD,QAAQ,GAAG,QAAQ,EAAE,MAAM,EAAEoB,WAAW,CAAC;AAChE;AAEA,OAAO,eAAeC,UAAU,GAAG;EAC/B,OAAOpB,WAAW,CAACD,QAAQ,GAAG,cAAc,CAAC;AACjD"},"metadata":{},"sourceType":"module","externalDependencies":[]}